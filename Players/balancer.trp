{
Program: Balancer

Author: Denahiro

Description: A very calm player who tries to balance his investments
}

procedure Assignment(var ToTerritory: integer);
var
  R,MaxContested: double;
  C,CActual,
  T,PT,PA,ET,EA,
  MaxEmpty,CEmpty,
  CContested,
  MinFrontsEntry,MinFrontsNoEntry,TActual,TEntry,TNoEntry: integer;
begin
  ToTerritory:=0;
  MaxEmpty:=-1;
  MaxContested:=-1;
  CEmpty:=0;
  CContested:=0;
  // look at state of SAmerica, Africa and Australia
  for C:=1 to 3 do begin
    CActual:=2*C;
    CAnalysis(CActual,PT,PA,ET,EA);
    if PT+ET<CTerritoriesCount(CActual) then begin
      if ET=0 then begin
        if PT>MaxEmpty then begin
          MaxEmpty:=PT;
          CEmpty:=CActual;
        end;
      end else begin
        R:=PT/ET;
        if R>MaxContested then begin
          MaxContested:=R;
          CContested:=CActual;
        end;
      end;
    end;
  end;

  // check if there is an empty continent and take non border
  if CEmpty>0 then begin
    TEntry:=0;
    TNoEntry:=0;
    MinFrontsEntry:=100;
    MinFrontsNoEntry:=100;
    for T:=1 to CTerritoriesCount(CEmpty) do begin
      TActual:=CTerritory(CEmpty,T);
      if TOwner(TActual)=0 then begin
        if TIsEntry(TActual) then begin
          if (TFrontsCount(TActual) < MinFrontsEntry) then begin
            TEntry:=TActual;
            MinFrontsEntry:=TFrontsCount(TActual);
          end;
        end else begin
          if (TFrontsCount(TActual) < MinFrontsNoEntry) then begin
            TNoEntry:=TActual;
            MinFrontsNoEntry:=TFrontsCount(TActual);
          end;
        end;
      end;
    end;
    if TNoEntry>0 then begin
      ToTerritory:=TNoEntry;
    end else begin
      ToTerritory:=TEntry;
    end;
  end;

  // check contested

  // if nothing of value find random free territory
  while (ToTerritory=0) do begin
    R:=URandom(42);
    T:=round(R)+1;
    if TOwner(T)=0 then
      ToTerritory:=T;
  end;
end;

procedure Placement(var ToTerritory: integer);
var
  T,Armies,MaxArmies: integer;
begin
  // reinforce territory with most armies and front
  ToTerritory:=0;
  MaxArmies:=0;
  for T:=1 to 42 do begin
    if TIsFront(T) then begin  // territory is mine and front
      Armies := TArmies(T);
      if Armies>MaxArmies then begin
        ToTerritory:=T;
        MaxArmies:=Armies;
      end;
    end;
  end;
end;

procedure Attack(var FromTerritory, ToTerritory: integer);
var
  T,EnemyT,EnemyA: integer;
begin
  // attack weakest point until exhausted
  FromTerritory:=0;
  ToTerritory:=0;
  for T:=1 to 42 do begin
    if TIsFront(T)                      // territory is mine and front
    and (TArmies(T)>1) then begin       // attack is possible
      TWeakestFront(T,EnemyT,EnemyA);
      if EnemyT>0 then begin
        FromTerritory:=T;
        ToTerritory:=EnemyT;
      end;
    end;
  end;
end;

procedure Occupation(FromTerritory, ToTerritory: integer; var Armies: integer);
begin
  //Move all
  Armies:=TArmies(FromTerritory)-1;
end;

procedure Fortification(var FromTerritory, ToTerritory, Armies: integer);
var
  T,B,MaxArmy: integer;
begin
  FromTerritory:=0;
  ToTerritory:=0;
  Armies:=0;
end;

begin
end.